{"ast":null,"code":"import _objectSpread from \"/Users/natewamwenze/Documents/personalProjects/musicidea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/natewamwenze/Documents/personalProjects/musicidea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/natewamwenze/Documents/personalProjects/musicidea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/natewamwenze/Documents/personalProjects/musicidea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/natewamwenze/Documents/personalProjects/musicidea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/natewamwenze/Documents/personalProjects/musicidea/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar DEFAULT_OPTIONS = {\n  buffer: null,\n  channelCount: 2,\n  channelCountMode: 'clamped-max',\n  channelInterpretation: 'speakers',\n  disableNormalization: false\n};\nexport var createConvolverNodeConstructor = function createConvolverNodeConstructor(audioNodeConstructor, createConvolverNodeRenderer, createNativeConvolverNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) {\n  return /*#__PURE__*/function (_audioNodeConstructor) {\n    _inherits(ConvolverNode, _audioNodeConstructor);\n\n    var _super = _createSuper(ConvolverNode);\n\n    function ConvolverNode(context, options) {\n      var _this;\n\n      _classCallCheck(this, ConvolverNode);\n\n      var nativeContext = getNativeContext(context);\n\n      var mergedOptions = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options);\n\n      var nativeConvolverNode = createNativeConvolverNode(nativeContext, mergedOptions);\n      var isOffline = isNativeOfflineAudioContext(nativeContext);\n      var convolverNodeRenderer = isOffline ? createConvolverNodeRenderer() : null;\n      _this = _super.call(this, context, false, nativeConvolverNode, convolverNodeRenderer);\n      _this._isBufferNullified = false;\n      _this._nativeConvolverNode = nativeConvolverNode;\n\n      if (mergedOptions.buffer !== null) {\n        setAudioNodeTailTime(_assertThisInitialized(_this), mergedOptions.buffer.duration);\n      }\n\n      return _this;\n    }\n\n    _createClass(ConvolverNode, [{\n      key: \"buffer\",\n      get: function get() {\n        if (this._isBufferNullified) {\n          return null;\n        }\n\n        return this._nativeConvolverNode.buffer;\n      },\n      set: function set(value) {\n        this._nativeConvolverNode.buffer = value; // Bug #115: Safari does not allow to set the buffer to null.\n\n        if (value === null && this._nativeConvolverNode.buffer !== null) {\n          var nativeContext = this._nativeConvolverNode.context;\n          this._nativeConvolverNode.buffer = nativeContext.createBuffer(1, 1, 44100);\n          this._isBufferNullified = true;\n          setAudioNodeTailTime(this, 0);\n        } else {\n          this._isBufferNullified = false;\n          setAudioNodeTailTime(this, this._nativeConvolverNode.buffer === null ? 0 : this._nativeConvolverNode.buffer.duration);\n        }\n      }\n    }, {\n      key: \"normalize\",\n      get: function get() {\n        return this._nativeConvolverNode.normalize;\n      },\n      set: function set(value) {\n        this._nativeConvolverNode.normalize = value;\n      }\n    }]);\n\n    return ConvolverNode;\n  }(audioNodeConstructor);\n};","map":{"version":3,"mappings":";;;;;;AAGA,IAAMA,eAAe,GAAG;AACpBC,QAAM,EAAE,IADY;AAEpBC,cAAY,EAAE,CAFM;AAGpBC,kBAAgB,EAAE,aAHE;AAIpBC,uBAAqB,EAAE,UAJH;AAKpBC,sBAAoB,EAAE;AALF,CAAxB;AAQA,OAAO,IAAMC,8BAA8B,GAAqC,SAAnEA,8BAAmE,CAC5EC,oBAD4E,EAE5EC,2BAF4E,EAG5EC,yBAH4E,EAI5EC,gBAJ4E,EAK5EC,2BAL4E,EAM5EC,oBAN4E,EAO5E;AACA;AAAA;;AAAA;;AAKI,2BAAYC,OAAZ,EAAwBC,OAAxB,EAA4D;AAAA;;AAAA;;AACxD,UAAMC,aAAa,GAAGL,gBAAgB,CAACG,OAAD,CAAtC;;AACA,UAAMG,aAAa,mCAAQhB,eAAR,GAA4Bc,OAA5B,CAAnB;;AACA,UAAMG,mBAAmB,GAAGR,yBAAyB,CAACM,aAAD,EAAgBC,aAAhB,CAArD;AACA,UAAME,SAAS,GAAGP,2BAA2B,CAACI,aAAD,CAA7C;AACA,UAAMI,qBAAqB,GAAiCD,SAAS,GAAGV,2BAA2B,EAA9B,GAAmC,IAAxG;AAEA,gCAAMK,OAAN,EAAe,KAAf,EAAsBI,mBAAtB,EAA2CE,qBAA3C;AAEA,YAAKC,kBAAL,GAA0B,KAA1B;AACA,YAAKC,oBAAL,GAA4BJ,mBAA5B;;AAEA,UAAID,aAAa,CAACf,MAAd,KAAyB,IAA7B,EAAmC;AAC/BW,4BAAoB,gCAAOI,aAAa,CAACf,MAAd,CAAqBqB,QAA5B,CAApB;AACH;;AAduD;AAe3D;;AApBL;AAAA;AAAA,WAsBI,eAAU;AACN,YAAI,KAAKF,kBAAT,EAA6B;AACzB,iBAAO,IAAP;AACH;;AAED,eAAO,KAAKC,oBAAL,CAA0BpB,MAAjC;AACH,OA5BL;AAAA,WA8BI,aAAWsB,KAAX,EAAgB;AACZ,aAAKF,oBAAL,CAA0BpB,MAA1B,GAAmCsB,KAAnC,CADY,CAGZ;;AACA,YAAIA,KAAK,KAAK,IAAV,IAAkB,KAAKF,oBAAL,CAA0BpB,MAA1B,KAAqC,IAA3D,EAAiE;AAC7D,cAAMc,aAAa,GAAG,KAAKM,oBAAL,CAA0BR,OAAhD;AAEA,eAAKQ,oBAAL,CAA0BpB,MAA1B,GAAmCc,aAAa,CAACS,YAAd,CAA2B,CAA3B,EAA8B,CAA9B,EAAiC,KAAjC,CAAnC;AACA,eAAKJ,kBAAL,GAA0B,IAA1B;AAEAR,8BAAoB,CAAC,IAAD,EAAO,CAAP,CAApB;AACH,SAPD,MAOO;AACH,eAAKQ,kBAAL,GAA0B,KAA1B;AAEAR,8BAAoB,CAAC,IAAD,EAAO,KAAKS,oBAAL,CAA0BpB,MAA1B,KAAqC,IAArC,GAA4C,CAA5C,GAAgD,KAAKoB,oBAAL,CAA0BpB,MAA1B,CAAiCqB,QAAxF,CAApB;AACH;AACJ;AA9CL;AAAA;AAAA,WAgDI,eAAa;AACT,eAAO,KAAKD,oBAAL,CAA0BI,SAAjC;AACH,OAlDL;AAAA,WAoDI,aAAcF,KAAd,EAAmB;AACf,aAAKF,oBAAL,CAA0BI,SAA1B,GAAsCF,KAAtC;AACH;AAtDL;;AAAA;AAAA,IAAuDhB,oBAAvD;AAwDH,CAhEM","names":["DEFAULT_OPTIONS","buffer","channelCount","channelCountMode","channelInterpretation","disableNormalization","createConvolverNodeConstructor","audioNodeConstructor","createConvolverNodeRenderer","createNativeConvolverNode","getNativeContext","isNativeOfflineAudioContext","setAudioNodeTailTime","context","options","nativeContext","mergedOptions","nativeConvolverNode","isOffline","convolverNodeRenderer","_isBufferNullified","_nativeConvolverNode","duration","value","createBuffer","normalize"],"sourceRoot":"","sources":["../../../src/factories/convolver-node-constructor.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}