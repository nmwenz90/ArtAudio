{"ast":null,"code":"/**\n * Edge up to version 14, Firefox up to version 52, Safari up to version 9 and maybe other browsers\n * did not refuse to decode invalid parameters with a TypeError.\n */\nexport var createTestAudioContextDecodeAudioDataMethodTypeErrorSupport = function createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor) {\n  return function () {\n    if (nativeOfflineAudioContextConstructor === null) {\n      return Promise.resolve(false);\n    }\n\n    var offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100); // Bug #21: Safari does not support promises yet.\n\n    return new Promise(function (resolve) {\n      var isPending = true;\n\n      var resolvePromise = function resolvePromise(err) {\n        if (isPending) {\n          isPending = false;\n          offlineAudioContext.startRendering();\n          resolve(err instanceof TypeError);\n        }\n      };\n\n      var promise; // Bug #26: Safari throws a synchronous error.\n\n      try {\n        promise = offlineAudioContext // Bug #1: Safari requires a successCallback.\n        .decodeAudioData(null, function () {// Ignore the success callback.\n        }, resolvePromise);\n      } catch (err) {\n        resolvePromise(err);\n      } // Bug #21: Safari does not support promises yet.\n\n\n      if (promise !== undefined) {\n        // Bug #6: Chrome, Edge, Firefox and Opera do not call the errorCallback.\n        promise.catch(resolvePromise);\n      }\n    });\n  };\n};","map":{"version":3,"mappings":"AAEA;;;;AAIA,OAAO,IAAMA,2DAA2D,GAAkE,SAA7HA,2DAA6H,CACtIC,oCADsI,EAEtI;AACA,SAAO,YAAK;AACR,QAAIA,oCAAoC,KAAK,IAA7C,EAAmD;AAC/C,aAAOC,OAAO,CAACC,OAAR,CAAgB,KAAhB,CAAP;AACH;;AAED,QAAMC,mBAAmB,GAAG,IAAIH,oCAAJ,CAAyC,CAAzC,EAA4C,CAA5C,EAA+C,KAA/C,CAA5B,CALQ,CAOR;;AACA,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAY;AAC3B,UAAIE,SAAS,GAAG,IAAhB;;AAEA,UAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,GAAD,EAAe;AAClC,YAAIF,SAAJ,EAAe;AACXA,mBAAS,GAAG,KAAZ;AAEAD,6BAAmB,CAACI,cAApB;AAEAL,iBAAO,CAACI,GAAG,YAAYE,SAAhB,CAAP;AACH;AACJ,OARD;;AAUA,UAAIC,OAAJ,CAb2B,CAe3B;;AACA,UAAI;AACAA,eAAO,GAAGN,mBAAmB,CACzB;AADyB,SAExBO,eAFK,CAGG,IAHH,EAIF,YAAK,CACD;AACH,SANC,EAOFL,cAPE,CAAV;AASH,OAVD,CAUE,OAAOC,GAAP,EAAY;AACVD,sBAAc,CAACC,GAAD,CAAd;AACH,OA5B0B,CA8B3B;;;AACA,UAAIG,OAAO,KAAKE,SAAhB,EAA2B;AACvB;AACAF,eAAO,CAACG,KAAR,CAAcP,cAAd;AACH;AACJ,KAnCM,CAAP;AAoCH,GA5CD;AA6CH,CAhDM","names":["createTestAudioContextDecodeAudioDataMethodTypeErrorSupport","nativeOfflineAudioContextConstructor","Promise","resolve","offlineAudioContext","isPending","resolvePromise","err","startRendering","TypeError","promise","decodeAudioData","undefined","catch"],"sourceRoot":"","sources":["../../../src/factories/test-audio-context-decode-audio-data-method-type-error-support.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}