{"ast":null,"code":"import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { testAnalyserNodeGetFloatTimeDomainDataMethodSupport } from '../helpers/test-analyser-node-get-float-time-domain-data-method-support';\nimport { wrapAnalyserNodeGetFloatTimeDomainDataMethod } from '../helpers/wrap-analyser-node-get-float-time-domain-data-method';\nexport var createNativeAnalyserNodeFactory = function createNativeAnalyserNodeFactory(cacheTestResult, createIndexSizeError) {\n  return function (nativeContext, options) {\n    var nativeAnalyserNode = nativeContext.createAnalyser(); // Bug #37: Firefox does not create an AnalyserNode with the default properties.\n\n    assignNativeAudioNodeOptions(nativeAnalyserNode, options); // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n\n    if (!(options.maxDecibels > options.minDecibels)) {\n      throw createIndexSizeError();\n    }\n\n    assignNativeAudioNodeOption(nativeAnalyserNode, options, 'fftSize');\n    assignNativeAudioNodeOption(nativeAnalyserNode, options, 'maxDecibels');\n    assignNativeAudioNodeOption(nativeAnalyserNode, options, 'minDecibels');\n    assignNativeAudioNodeOption(nativeAnalyserNode, options, 'smoothingTimeConstant'); // Bug #36: Safari does not support getFloatTimeDomainData() yet.\n\n    if (!cacheTestResult(testAnalyserNodeGetFloatTimeDomainDataMethodSupport, function () {\n      return testAnalyserNodeGetFloatTimeDomainDataMethodSupport(nativeAnalyserNode);\n    })) {\n      wrapAnalyserNodeGetFloatTimeDomainDataMethod(nativeAnalyserNode);\n    }\n\n    return nativeAnalyserNode;\n  };\n};","map":{"version":3,"mappings":"AAAA,SAASA,2BAAT,QAA4C,4CAA5C;AACA,SAASC,4BAAT,QAA6C,6CAA7C;AACA,SAASC,mDAAT,QAAoE,yEAApE;AACA,SAASC,4CAAT,QAA6D,iEAA7D;AAGA,OAAO,IAAMC,+BAA+B,GAAsC,SAArEA,+BAAqE,CAACC,eAAD,EAAkBC,oBAAlB,EAA0C;AACxH,SAAO,UAACC,aAAD,EAAgBC,OAAhB,EAA2B;AAC9B,QAAMC,kBAAkB,GAAGF,aAAa,CAACG,cAAd,EAA3B,CAD8B,CAG9B;;AACAT,gCAA4B,CAACQ,kBAAD,EAAqBD,OAArB,CAA5B,CAJ8B,CAM9B;;AACA,QAAI,EAAEA,OAAO,CAACG,WAAR,GAAsBH,OAAO,CAACI,WAAhC,CAAJ,EAAkD;AAC9C,YAAMN,oBAAoB,EAA1B;AACH;;AAEDN,+BAA2B,CAACS,kBAAD,EAAqBD,OAArB,EAA8B,SAA9B,CAA3B;AACAR,+BAA2B,CAACS,kBAAD,EAAqBD,OAArB,EAA8B,aAA9B,CAA3B;AACAR,+BAA2B,CAACS,kBAAD,EAAqBD,OAArB,EAA8B,aAA9B,CAA3B;AACAR,+BAA2B,CAACS,kBAAD,EAAqBD,OAArB,EAA8B,uBAA9B,CAA3B,CAd8B,CAgB9B;;AACA,QACI,CAACH,eAAe,CAACH,mDAAD,EAAsD;AAAA,aAClEA,mDAAmD,CAACO,kBAAD,CADe;AAAA,KAAtD,CADpB,EAIE;AACEN,kDAA4C,CAACM,kBAAD,CAA5C;AACH;;AAED,WAAOA,kBAAP;AACH,GA1BD;AA2BH,CA5BM","names":["assignNativeAudioNodeOption","assignNativeAudioNodeOptions","testAnalyserNodeGetFloatTimeDomainDataMethodSupport","wrapAnalyserNodeGetFloatTimeDomainDataMethod","createNativeAnalyserNodeFactory","cacheTestResult","createIndexSizeError","nativeContext","options","nativeAnalyserNode","createAnalyser","maxDecibels","minDecibels"],"sourceRoot":"","sources":["../../../src/factories/native-analyser-node-factory.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}